<Page
    x:Class="Luo_Painter.DrawPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:transformers="using:FanKit.Transformers"
    xmlns:local="using:Luo_Painter"
    xmlns:edits="using:Luo_Painter.Edits"
    xmlns:options="using:Luo_Painter.Options"
    xmlns:elements="using:Luo_Painter.Elements"
    xmlns:layers="using:Luo_Painter.Layers"
    xmlns:controls="using:Luo_Painter.Controls"
    xmlns:tools="using:Luo_Painter.Tools"
    xmlns:effects="using:Microsoft.Graphics.Canvas.Effects"
    xmlns:canvas="using:Microsoft.Graphics.Canvas.UI.Xaml"
    mc:Ignorable="d" 
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    >


    <FrameworkElement.Resources>
        <!--Transformer-->
        <transformers:CanvasOperator x:Name="Operator" DestinationControl="{x:Bind CanvasControl}"/>
        <transformers:CanvasTransformer x:Name="Transformer" />
        <local:ApplicationBrushesExtension x:Name="ApplicationBrushes"/>

        <!--Storyboard-->
        <Storyboard x:Name="ShowStoryboard" >
            <DoubleAnimation Duration="0:0:0.15" By="{x:Null}" To="0" Storyboard.TargetProperty="Y" Storyboard.TargetName="HeadTransform" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.15" By="{x:Null}" To="0" Storyboard.TargetProperty="Y" Storyboard.TargetName="FootTransform" d:IsOptimized="True"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ToolListView" Storyboard.TargetProperty="IsShow">
                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LayerListView" Storyboard.TargetProperty="IsShow">
                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OptionBorder" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OptionPanel" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OptionSecondaryButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="UnFullScreenButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="UnFullScreenButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames BeginTime="0:0:0.15" Storyboard.TargetName="FullScreenButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Name="HideStoryboard" >
            <DoubleAnimation Duration="0:0:0.1" By="{x:Null}" To="-50" Storyboard.TargetProperty="Y" Storyboard.TargetName="HeadTransform" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.1" By="{x:Null}" To="50" Storyboard.TargetProperty="Y" Storyboard.TargetName="FootTransform" d:IsOptimized="True"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ToolListView" Storyboard.TargetProperty="IsShow">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LayerListView" Storyboard.TargetProperty="IsShow">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OptionBorder" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OptionPanel" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="FullScreenButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OptionSecondaryButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames BeginTime="0:0:0.1" Storyboard.TargetName="UnFullScreenButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames BeginTime="0:0:0.1" Storyboard.TargetName="UnFullScreenButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Name="OptionStoryboard" >
            <DoubleAnimation Duration="0:0:0.1" By="{x:Null}" To="-50" Storyboard.TargetProperty="Y" Storyboard.TargetName="HeadTransform" d:IsOptimized="True"/>
            <DoubleAnimation Duration="0:0:0.1" By="{x:Null}" To="50" Storyboard.TargetProperty="Y" Storyboard.TargetName="FootTransform" d:IsOptimized="True"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ToolListView" Storyboard.TargetProperty="IsShow">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LayerListView" Storyboard.TargetProperty="IsShow">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OptionBorder" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OptionPanel" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="FullScreenButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="UnFullScreenButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="UnFullScreenButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames BeginTime="0:0:0.1" Storyboard.TargetName="OptionSecondaryButton" Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>

        <!--Storyboard-->
        <Storyboard x:Name="ShowTipStoryboard" >
            <DoubleAnimation Duration="0:0:0.15" By="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TipBorder" d:IsOptimized="True"/>
        </Storyboard>
        <Storyboard x:Name="HideTipStoryboard" >
            <DoubleAnimation Duration="0:0:0.1" By="1" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TipBorder" d:IsOptimized="True"/>
        </Storyboard>




        <!--Flyout-->
        <Flyout x:Name="LayerFlyout" Placement="Left">
            <tools:LayerTool x:Name="LayerTool"/>
        </Flyout>
    </FrameworkElement.Resources>


    <Grid Background="{ThemeResource SystemControlDisabledChromeHighBrush}">

        <!--VisualState-->
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>

                <!--Phone-->
                <VisualState x:Name="Phone">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--Foot-->
                        <Setter Target="OptionBorder.CornerRadius" Value="0"/>
                        <Setter Target="OptionBorder.Margin" Value="0"/>
                        <Setter Target="OptionBorder.HorizontalAlignment" Value="Stretch"/>
                        <Setter Target="OptionBorder.BorderThickness" Value="0,1,0,0"/>
                        <Setter Target="OptionPanel.Margin" Value="0"/>
                        <Setter Target="OptionPanel.HorizontalAlignment" Value="Stretch"/>
                        <!--Option-->
                        <Setter Target= "EditButton.Orientation" Value= "Vertical" />

                        <Setter Target="GradientMappingSelector.Width" Value="Auto"/>

                        <Setter Target="RippleEffectPanel.Orientation" Value="Vertical"/>
                        <Setter Target="FrequencySlider.Width" Value="Auto"/>
                        <Setter Target="PhaseSlider.Width" Value="Auto"/>
                        <Setter Target="AmplitudeSlider.Width" Value="Auto"/>

                        <Setter Target="TemperaturePanel.Orientation" Value="Vertical"/>
                        <Setter Target="TemperatureSlider.Width" Value="Auto"/>
                        <Setter Target="TintSlider.Width" Value="Auto"/>

                        <Setter Target="HighlightsAndShadowsPanel1.Orientation" Value="Vertical"/>
                        <Setter Target="HighlightsAndShadowsPanel2.Orientation" Value="Vertical"/>
                        <Setter Target="ShadowsSlider.Width" Value="Auto"/>
                        <Setter Target="HighlightsSlider.Width" Value="Auto"/>
                        <Setter Target="ClaritySlider.Width" Value="Auto"/>
                        <Setter Target="BlurSlider.Width" Value="Auto"/>
                    </VisualState.Setters>
                </VisualState>

                <!--Pad-->
                <VisualState x:Name="Pad">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="600"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--Foot-->
                        <Setter Target="OptionBorder.CornerRadius" Value="8,8,0,0"/>
                        <Setter Target="OptionBorder.Margin" Value="0"/>
                        <Setter Target="OptionBorder.BorderThickness" Value="1,1,1,0"/>
                        <Setter Target="OptionPanel.Margin" Value="0"/>
                        <!--Option-->
                        <Setter Target="GradientMappingSelector.Width" Value="500"/>

                        <Setter Target="RippleEffectPanel.Orientation" Value="Vertical"/>
                        <Setter Target="FrequencySlider.Width" Value="Auto"/>
                        <Setter Target="PhaseSlider.Width" Value="Auto"/>
                        <Setter Target="AmplitudeSlider.Width" Value="Auto"/>

                        <Setter Target="TemperaturePanel.Orientation" Value="Vertical"/>
                        <Setter Target="TemperatureSlider.Width" Value="Auto"/>
                        <Setter Target="TintSlider.Width" Value="Auto"/>
                    </VisualState.Setters>
                </VisualState>

                <!--PC-->
                <VisualState x:Name="PC">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="900"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                    </VisualState.Setters>
                </VisualState>

                <!--Hub-->
                <VisualState x:Name="Hub">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="1200"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <!--Option-->
                        <Setter Target="HighlightsAndShadowsPanel.Orientation" Value="Horizontal"/>
                    </VisualState.Setters>
                </VisualState>


            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>


        <!--Extension-->
        <elements:ApplicationTitleBarExtension x:Name="ApplicationView" TitleBarColor="{ThemeResource AppBackgroundColor}" AccentTitleBarColor="{ThemeResource SystemChromeHighColor}"/>



        <!--Canvas-->
        <canvas:CanvasVirtualControl x:Name="CanvasControl" FlowDirection="LeftToRight" />
        <canvas:CanvasAnimatedControl x:Name="CanvasAnimatedControl" FlowDirection="LeftToRight" IsHitTestVisible="False" TargetElapsedTime="0:0:0.05" />


        <!--Head-->
        <Button x:Name="UnFullScreenButton" IsEnabled="False" Visibility="Collapsed" HorizontalAlignment="Right" VerticalAlignment="Top" Background="Transparent" Style="{StaticResource AppButtonStyle}">
            <UIElement.KeyboardAccelerators>
                <KeyboardAccelerator Modifiers="None" Key="Escape"/>
            </UIElement.KeyboardAccelerators>
            <SymbolIcon Symbol="BackToWindow"/>
        </Button>
        <Grid Height="50" HorizontalAlignment="Stretch" VerticalAlignment="Top" BorderThickness="0,0,0,1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackground}">

            <UIElement.RenderTransformOrigin>
                0.5,0.5
            </UIElement.RenderTransformOrigin>
            <UIElement.RenderTransform>
                <TranslateTransform x:Name="HeadTransform" Y="0"/>
            </UIElement.RenderTransform>

            <StackPanel Orientation="Horizontal">
                <controls:ExportButton x:Name="ExportButton" />
                <Button x:Name="SettingButton" Background="Transparent" Style="{StaticResource AppButtonStyle}">
                    <SymbolIcon Symbol="Setting"/>
                </Button>
                <controls:SetupButton x:Name="SetupButton" />

                <Button x:Name="FullScreenButton" Background="Transparent" Style="{StaticResource AppButtonStyle}">
                    <UIElement.KeyboardAccelerators>
                        <KeyboardAccelerator Modifiers="None" Key="Escape"/>
                    </UIElement.KeyboardAccelerators>
                    <SymbolIcon Symbol="FullScreen"/>
                </Button>
            </StackPanel>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="UndoButton" IsEnabled="False" Background="Transparent" Style="{StaticResource AppButtonStyle}">
                    <UIElement.KeyboardAccelerators>
                        <KeyboardAccelerator Modifiers="Control" Key="Z"/>
                    </UIElement.KeyboardAccelerators>
                    <SymbolIcon Symbol="Undo"/>
                </Button>
                <Button x:Name="RedoButton" IsEnabled="False" Background="Transparent" Style="{StaticResource AppButtonStyle}">
                    <UIElement.KeyboardAccelerators>
                        <KeyboardAccelerator Modifiers="Control" Key="Y"/>
                    </UIElement.KeyboardAccelerators>
                    <SymbolIcon Symbol="Redo"/>
                </Button>
                <controls:ColorButton x:Name="ColorButton" Eyedropper="{x:Bind Eyedropper}" ClickEyedropper="{x:Bind ClickEyedropper}" />
            </StackPanel>

            <!--Option-->
            <StackPanel Orientation= "Horizontal" HorizontalAlignment= "Center" >
                <controls:EditButton x:Name="EditButton" Orientation="Horizontal" />
                <controls:OptionButton x:Name="OptionButton" />
                <controls:MoreOptionButton x:Name="MoreOptionButton" />
            </StackPanel>

        </Grid>


        <!--Foot-->
        <Grid Height="50" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" BorderThickness="0,1,0,0" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackground}">

            <UIElement.RenderTransformOrigin>
                0.5,0.5
            </UIElement.RenderTransformOrigin>
            <UIElement.RenderTransform>
                <TranslateTransform x:Name="FootTransform" Y="0"/>
            </UIElement.RenderTransform>

            <local:ToolGroupSwitchPresenter x:Name="ToolGroupSwitchPresenter2" Margin="70,0" MaxWidth="720" Padding="8,0" >
                <local:ToolGroupCase GroupValue="Paint">
                    <Grid>
                        <!--<Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="12"/>
                            <ColumnDefinition Width="1*"/>
                        </Grid.ColumnDefinitions>
                        <Slider x:Name="PaintSizeSlider2" Grid.Column="0" Value="22" Minimum="1" Maximum="500" >
                        </Slider>
                        <Slider x:Name="PaintOpacitySlider2" Grid.Column="2" Value="100" Minimum="0" Maximum="100" >
                        </Slider>-->
                    </Grid>
                </local:ToolGroupCase>
                <local:ToolGroupCase GroupValue="Marquee">
                    <ListBox x:Name="MarqueeComboBox" SelectedIndex="0">
                        <FontIcon Glyph="&#xE002;" FontSize="14" FontFamily="Segoe UI Symbol" />
                        <Canvas Width="25" Height="25" >
                            <FontIcon Canvas.Left="-1" Glyph="&#xE002;" FontSize="12" FontFamily="Segoe UI Symbol" />
                            <FontIcon Canvas.Left="7" Canvas.Top="8" Glyph="&#xE002;" FontSize="12" FontFamily="Segoe UI Symbol" />
                        </Canvas>
                        <Canvas Width="25" Height="25" >
                            <FontIcon Canvas.Top="-6" Glyph="&#x259B;" FontSize="18" FontFamily="Segoe UI Symbol" />
                            <FontIcon Canvas.Left="7" Canvas.Top="7" Glyph="&#xE003;" FontSize="12" FontFamily="Segoe UI Symbol" />
                        </Canvas>
                        <Canvas Width="24" Height="24" >
                            <FontIcon Canvas.Left="0" Glyph="&#xE003;" FontSize="12" FontFamily="Segoe UI Symbol" />
                            <FontIcon Canvas.Left="6" Canvas.Top="6" Glyph="&#xE003;" FontSize="12" FontFamily="Segoe UI Symbol" />
                            <FontIcon Canvas.Left="6" Canvas.Top="6" Glyph="&#xE002;" FontSize="8" FontFamily="Segoe UI Symbol" />
                        </Canvas>
                    </ListBox>
                </local:ToolGroupCase>
                <local:ToolGroupCase GroupValue="Vector" Value="View">
                    <Grid>
                        <!--<Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="12"/>
                            <ColumnDefinition Width="1*"/>
                        </Grid.ColumnDefinitions>
                        <Slider x:Name="RadianSlider2" Grid.Column="0" Value="{x:Bind RadianSlider.Value, Mode=OneWay}" Minimum="{x:Bind RadianRange.Range.Minimum}" Maximum="{x:Bind RadianRange.Range.Maximum}" >
                        </Slider>
                        <Slider x:Name="ScaleSlider2" Grid.Column="2" Value="{x:Bind ScaleSlider.Value, Mode=OneWay}" Minimum="{x:Bind ScaleRange.XRange.Minimum}" Maximum="{x:Bind ScaleRange.XRange.Maximum}" >
                        </Slider>-->
                    </Grid>
                </local:ToolGroupCase>
            </local:ToolGroupSwitchPresenter>

            <Button x:Name="LayerButton" HorizontalAlignment="Right" Style="{StaticResource AppButtonStyle}">
                <UIElement.KeyboardAccelerators>
                    <KeyboardAccelerator Modifiers="None" Key="D"/>
                </UIElement.KeyboardAccelerators>
                <PathIcon>
                    <PathIcon.Data>
                        M11.839,19.464l9.279,-5.4l2.56,1.38l-11.839,6.519l-11.839,-6.519l2.278,-1.38l9.561,5.4Zm0,-4.33l-9.561,-5.471l-2.278,1.319l11.839,6.531l11.839,-6.531l-2.132,-1.319l-9.707,5.471Zm0,-2.069l-11.839,-6.494l11.839,-6.571l11.839,6.571l-11.839,6.494Z
                    </PathIcon.Data>
                </PathIcon>
            </Button>

            <Button x:Name="ToolButton" HorizontalAlignment="Left" Style="{StaticResource AppButtonStyle}">
                <UIElement.KeyboardAccelerators>
                    <KeyboardAccelerator Modifiers="None" Key="A"/>
                </UIElement.KeyboardAccelerators>
                <Button.Flyout>
                    <Flyout Placement="Right">
                        <local:ToolGroupSwitchPresenter x:Name="ToolGroupSwitchPresenter" Width="320" >
                            <local:ToolGroupCase GroupValue="Paint">
                                <tools:PaintTool x:Name="PaintTool" />
                            </local:ToolGroupCase>
                            <local:ToolGroupCase GroupValue="Vector" Value="View">
                                <tools:ViewTool x:Name="ViewTool" />
                            </local:ToolGroupCase>
                        </local:ToolGroupSwitchPresenter>
                    </Flyout>
                </Button.Flyout>
                <!--Icon-->
                <ContentControl x:Name="ToolIcon">
                    <FrameworkElement.Resources>
                        <ResourceDictionary x:Name="ToolResource"/>
                    </FrameworkElement.Resources>
                </ContentControl>
            </Button>

        </Grid>


        <!--Tool-->
        <controls:ToolListView x:Name="ToolListView" />


        <!--Layer-->
        <controls:LayerListView x:Name="LayerListView" ItemsSource="{x:Bind ObservableCollection}" />


        <!--Foot-->
        <Border x:Name="OptionBorder" Visibility="Collapsed" Margin="22" MinWidth="440" HorizontalAlignment="Center" VerticalAlignment="Bottom" 
                CornerRadius="8" BorderThickness="1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppBackgroundLight}" >
            <UIElement.RenderTransformOrigin>
                0.5,0.5
            </UIElement.RenderTransformOrigin>
            <UIElement.RenderTransform>
                <TranslateTransform x:Name="OptionTransform2" Y="0"/>
            </UIElement.RenderTransform>
        </Border>
        <StackPanel x:Name="OptionPanel" Visibility="Collapsed" Margin="22" MinWidth="440" HorizontalAlignment="Center" VerticalAlignment="Bottom" >

            <UIElement.RenderTransformOrigin>
                0.5,0.5
            </UIElement.RenderTransformOrigin>
            <UIElement.RenderTransform>
                <TranslateTransform x:Name="OptionTransform" Y="0"/>
            </UIElement.RenderTransform>

            <Grid Height="50">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Button x:Name="OptionPrimaryButton" Grid.Column="2" Background="Transparent" Style="{StaticResource AppButtonStyle}">
                    <FontIcon Glyph="&#xEC61;" FontFamily="Segoe MDL2 Assets"/>
                </Button>
                <Button x:Name="OptionSecondaryButton" IsEnabled="False" Background="Transparent" Style="{StaticResource AppButtonStyle}">
                    <UIElement.KeyboardAccelerators>
                        <KeyboardAccelerator Modifiers="None" Key="Escape"/>
                    </UIElement.KeyboardAccelerators>
                    <SymbolIcon Symbol="Back"/>
                </Button>

                <local:OptionSwitchPresenter x:Name="OptionSwitchPresenter2" Grid.Column="1">
                    <local:OptionCase Value="Transform">
                        <ListBox x:Name="TransformComboBox" SelectedIndex="1" >
                            <x:String>Move</x:String>
                            <x:String>Transform</x:String>
                            <x:String>Free Transform</x:String>
                        </ListBox>
                    </local:OptionCase>
                    <local:OptionCase Value="LuminanceToAlpha">
                        <ListBox x:Name="LuminanceToAlphaComboBox" SelectedIndex="1" >
                            <x:String>Normal</x:String>
                            <x:String>White Paper</x:String>
                            <x:String>Black Paper</x:String>
                        </ListBox>
                    </local:OptionCase>
                </local:OptionSwitchPresenter>

                <StackPanel x:Name="OptionTitle" Visibility="Collapsed" Grid.Column="1" Margin="6,0" Orientation="Horizontal" Background="{ThemeResource AppBackground}">
                    <UIElement.ManipulationMode>
                        TranslateX, TranslateY
                    </UIElement.ManipulationMode>
                    <controls:OptionIcon x:Name="OptionIcon" Width="50" />
                    <TextBlock x:Name="OptionTextBlock" Visibility="Visible" VerticalAlignment="Center" Style="{StaticResource TitleTextBlockStyle}" />
                </StackPanel>

            </Grid>

            <ContentControl Height="2"/>

            <local:OptionSwitchPresenter x:Name="OptionSwitchPresenter" >
                <local:OptionCase Value="GradientMapping">
                    <elements:GradientStopSelectorWithUI x:Name="GradientMappingSelector" Margin="32,4" Width="740" Height="50" HorizontalAlignment="Stretch">
                        <elements:GradientStopSelector.ItemStyle>
                            <Style TargetType="Button" BasedOn="{StaticResource TextBlockButtonStyle}">
                                <Setter Property="Width" Value="50"/>
                                <Setter Property="Height" Value="50"/>
                                <Setter Property="Padding" Value="3"/>
                            </Style>
                        </elements:GradientStopSelector.ItemStyle>
                        <elements:GradientStopSelector.ItemTemplate>
                            <DataTemplate x:DataType="GradientStop">
                                <Border Width="44" Height="44" CornerRadius="4" BorderThickness="1" BorderBrush="Black" Background="Black">
                                    <ToolTipService.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{x:Bind Offset, Mode=OneWay}"/>
                                        </ToolTip>
                                    </ToolTipService.ToolTip>
                                    <Rectangle RadiusX="4.2" RadiusY="4.2" StrokeThickness="1" Stroke="White">
                                        <Rectangle.Fill>
                                            <SolidColorBrush Color="{x:Bind Color, Mode=OneWay}"/>
                                        </Rectangle.Fill>
                                    </Rectangle>
                                </Border>
                            </DataTemplate>
                        </elements:GradientStopSelector.ItemTemplate>
                    </elements:GradientStopSelectorWithUI>
                </local:OptionCase>
                <local:OptionCase Value="Exposure">
                    <Slider x:Name="ExposureSlider" Minimum="-200" Maximum="200" Style="{StaticResource AppSliderStyle}">
                        <Slider.Background>
                            <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                <GradientStop Color="Black" Offset="0"/>
                                <GradientStop Color="White" Offset="1"/>
                            </LinearGradientBrush>
                        </Slider.Background>
                        <Slider.Tag>
                            Exposure
                        </Slider.Tag>
                        <Slider.Header>
                            <Button x:Name="ExposureButton" Content="{x:Bind ExposureSlider.Value, Mode=OneWay}"
                                    Padding="4,0" MinWidth="70" Height="28"
                                    BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                <Button.Flyout>
                                    <Flyout>

                                    </Flyout>
                                </Button.Flyout>
                            </Button>
                        </Slider.Header>
                    </Slider>
                </local:OptionCase>
                <local:OptionCase Value="Brightness">
                    <Slider x:Name="BrightnessSlider" Value="100" Minimum="1" Maximum="200" Style="{StaticResource AppSliderStyle}">
                        <Slider.Background>
                            <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                <GradientStop Color="Black" Offset="0"/>
                                <GradientStop Color="White" Offset="1"/>
                            </LinearGradientBrush>
                        </Slider.Background>
                        <Slider.Tag>
                            Brightness
                        </Slider.Tag>
                        <Slider.Header>
                            <Button x:Name="BrightnessButton" Content="{x:Bind BrightnessSlider.Value, Mode=OneWay}"            
                                    Padding="4,0" MinWidth="70" Height="28"
                                    BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                <Button.Flyout>
                                    <Flyout>

                                    </Flyout>
                                </Button.Flyout>
                            </Button>
                        </Slider.Header>
                    </Slider>
                </local:OptionCase>
                <local:OptionCase Value="Saturation">
                    <Slider x:Name="SaturationSlider" Value="100" Minimum="0" Maximum="200" Style="{StaticResource AppSliderStyle}">
                        <Slider.Background>
                            <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                <GradientStop Color="Gray" Offset="0"/>
                                <GradientStop Color="#00A5FF" Offset="1"/>
                            </LinearGradientBrush>
                        </Slider.Background>
                        <Slider.Tag>
                            Saturation
                        </Slider.Tag>
                        <Slider.Header>
                            <Button x:Name="SaturationButton" Content="{x:Bind SaturationSlider.Value, Mode=OneWay}"            
                                    Padding="4,0" MinWidth="70" Height="28"
                                    BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                <Button.Flyout>
                                    <Flyout>

                                    </Flyout>
                                </Button.Flyout>
                            </Button>
                        </Slider.Header>
                    </Slider>
                </local:OptionCase>
                <local:OptionCase Value="HueRotation">
                    <Slider x:Name="HueRotationSlider" Minimum="0" Maximum="360" Style="{StaticResource AppSliderStyle}">
                        <Slider.Background>
                            <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                <GradientStop Color="#FFCE3B" Offset="0"/>
                                <GradientStop Color="#72C075" Offset="0.125"/>
                                <GradientStop Color="#46A7F6" Offset="0.25"/>
                                <GradientStop Color="#784BB0" Offset="0.375"/>
                                <GradientStop Color="#A336B5" Offset="0.5"/>
                                <GradientStop Color="#EB2E6E" Offset="0.625"/>
                                <GradientStop Color="#EC5449" Offset="0.75"/>
                                <GradientStop Color="#FFA827" Offset="0.875"/>
                                <GradientStop Color="#FFCE3B" Offset="1"/>
                            </LinearGradientBrush>
                        </Slider.Background>
                        <Slider.Tag>
                            HueRotation
                        </Slider.Tag>
                        <Slider.Header>
                            <Button x:Name="HueRotationButton" Content="{x:Bind HueRotationSlider.Value, Mode=OneWay}"            
                                    Padding="4,0" MinWidth="70" Height="28"
                                    BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                <Button.Flyout>
                                    <Flyout>

                                    </Flyout>
                                </Button.Flyout>
                            </Button>
                        </Slider.Header>
                    </Slider>
                </local:OptionCase>
                <local:OptionCase Value="Contrast">
                    <Slider x:Name="ContrastSlider" Minimum="-100" Maximum="100" Style="{StaticResource AppSliderStyle}">
                        <Slider.Background>
                            <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                <GradientStop Color="#888888" Offset="0"/>

                                <GradientStop Color="#6D6D6D" Offset="0.4"/>
                                <GradientStop Color="#909090" Offset="0.5"/>

                                <GradientStop Color="#353535" Offset="0.6"/>
                                <GradientStop Color="#C9C9C9" Offset="0.7"/>

                                <GradientStop Color="#000000" Offset="0.8"/>
                                <GradientStop Color="#FFFFFF" Offset="1"/>

                            </LinearGradientBrush>
                        </Slider.Background>
                        <Slider.Tag>
                            Contrast
                        </Slider.Tag>
                        <Slider.Header>
                            <Button x:Name="ContrastButton" Content="{x:Bind ContrastSlider.Value, Mode=OneWay}"            
                                    Padding="4,0" MinWidth="70" Height="28"
                                    BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                <Button.Flyout>
                                    <Flyout>

                                    </Flyout>
                                </Button.Flyout>
                            </Button>
                        </Slider.Header>
                    </Slider>

                </local:OptionCase>
                <local:OptionCase Value="Temperature">
                    <StackPanel x:Name="TemperaturePanel" Orientation="Horizontal">
                        <Slider x:Name="TemperatureSlider" Width="260" Minimum="-100" Maximum="100" Style="{StaticResource AppSliderStyle}">
                            <Slider.Background>
                                <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                    <GradientStop Color="#3EADF5" Offset="0"/>
                                    <GradientStop Color="#FFFFFF" Offset="0.5"/>
                                    <GradientStop Color="#F99652" Offset="1"/>
                                </LinearGradientBrush>
                            </Slider.Background>
                            <Slider.Tag>
                                Temperature
                            </Slider.Tag>
                            <Slider.Header>
                                <Button x:Name="TemperatureButton" Content="{x:Bind TemperatureSlider.Value, Mode=OneWay}"            
                                        Padding="4,0" MinWidth="70" Height="28"
                                        BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                    <Button.Flyout>
                                        <Flyout>

                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Slider.Header>
                        </Slider>
                        <Slider x:Name="TintSlider" Width="260" Minimum="-100" Maximum="100" Style="{StaticResource AppSliderStyle}">
                            <Slider.Background>
                                <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                    <GradientStop Color="#9680C9" Offset="0"/>
                                    <GradientStop Color="#FFFFFF" Offset="0.5"/>
                                    <GradientStop Color="#80763E" Offset="1"/>
                                </LinearGradientBrush>
                            </Slider.Background>
                            <Slider.Tag>
                                Tint
                            </Slider.Tag>
                            <Slider.Header>
                                <Button x:Name="TintButton" Content="{x:Bind TintSlider.Value, Mode=OneWay}"            
                                        Padding="4,0" MinWidth="70" Height="28"
                                        BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                    <Button.Flyout>
                                        <Flyout>

                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Slider.Header>
                        </Slider>
                    </StackPanel>
                </local:OptionCase>
                <local:OptionCase Value="HighlightsAndShadows">
                    <StackPanel x:Name="HighlightsAndShadowsPanel" Orientation="Vertical" Visibility="Collapsed">
                        <StackPanel x:Name="HighlightsAndShadowsPanel1" Orientation="Horizontal" >
                            <Slider x:Name="ShadowsSlider" Width="260" Minimum="-100" Maximum="100" Style="{StaticResource AppSliderStyle}">
                                <Slider.Background>
                                    <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                        <GradientStop Color="Black" Offset="0"/>
                                        <GradientStop Color="Gray" Offset="1"/>
                                    </LinearGradientBrush>
                                </Slider.Background>
                                <Slider.Tag>
                                    Shadows
                                </Slider.Tag>
                                <Slider.Header>
                                    <Button x:Name="ShadowsButton" Content="{x:Bind ShadowsSlider.Value, Mode=OneWay}"            
                                            Padding="4,0" MinWidth="70" Height="28"
                                            BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                        <Button.Flyout>
                                            <Flyout>

                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </Slider.Header>
                            </Slider>
                            <Slider x:Name="HighlightsSlider" Width="260" Minimum="-100" Maximum="100" Style="{StaticResource AppSliderStyle}">
                                <Slider.Background>
                                    <LinearGradientBrush StartPoint=" 0,0.5" EndPoint="1,0.5">
                                        <GradientStop Color="Gray" Offset="0"/>
                                        <GradientStop Color="White" Offset="1"/>
                                    </LinearGradientBrush>
                                </Slider.Background>
                                <Slider.Tag>
                                    Highlights
                                </Slider.Tag>
                                <Slider.Header>
                                    <Button x:Name="HighlightsButton" Content="{x:Bind HighlightsSlider.Value, Mode=OneWay}"            
                                            Padding="4,0" MinWidth="70" Height="28"
                                            BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                        <Button.Flyout>
                                            <Flyout>

                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </Slider.Header>
                            </Slider>
                        </StackPanel>
                        <StackPanel x:Name="HighlightsAndShadowsPanel2" Orientation="Horizontal" >
                            <Slider x:Name="ClaritySlider" Width="260" Minimum="-100" Maximum="100" Style="{StaticResource AppSliderStyle}">
                                <Slider.Tag>
                                    Clarity
                                </Slider.Tag>
                                <Slider.Header>
                                    <Button x:Name="ClarityButton" Content="{x:Bind ClaritySlider.Value, Mode=OneWay}"            
                                            Padding="4,0" MinWidth="70" Height="28"
                                            BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                        <Button.Flyout>
                                            <Flyout>

                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </Slider.Header>
                            </Slider>
                            <Slider x:Name="BlurSlider" Width="260" Value="125" Minimum="0" Maximum="1000" Style="{StaticResource AppSliderStyle}">
                                <Slider.Tag>
                                    Blur
                                </Slider.Tag>
                                <Slider.Header>
                                    <Button x:Name="BlurButton" Content="{x:Bind BlurSlider.Value, Mode=OneWay}"            
                                            Padding="4,0" MinWidth="70" Height="28"
                                            BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                        <Button.Flyout>
                                            <Flyout>

                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </Slider.Header>
                            </Slider>
                        </StackPanel>
                    </StackPanel>

                </local:OptionCase>
                <local:OptionCase Value="RippleEffect">
                    <StackPanel x:Name="RippleEffectPanel" Orientation="Horizontal">
                        <Slider x:Name="FrequencySlider" Width="260" Value="140" Minimum="0" Maximum="300" Style="{StaticResource AppSliderStyle}">
                            <Slider.Tag>
                                Frequency
                            </Slider.Tag>
                            <Slider.Header>
                                <Button x:Name="FrequencyButton" Content="{x:Bind FrequencySlider.Value, Mode=OneWay}"            
                                    Padding="4,0" MinWidth="70" Height="28"
                                    BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                    <Button.Flyout>
                                        <Flyout>

                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Slider.Header>
                        </Slider>
                        <Slider x:Name="PhaseSlider" Width="260" Minimum="-100" Maximum="0" Style="{StaticResource AppSliderStyle}">
                            <Slider.Tag>
                                Phase
                            </Slider.Tag>
                            <Slider.Header>
                                <Button x:Name="PhaseButton" Content="{x:Bind PhaseSlider.Value, Mode=OneWay}"            
                                    Padding="4,0" MinWidth="70" Height="28"
                                    BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                    <Button.Flyout>
                                        <Flyout>

                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Slider.Header>
                        </Slider>
                        <Slider x:Name="AmplitudeSlider" Width="260" Value="60" Minimum="0" Maximum="200" Style="{StaticResource AppSliderStyle}">
                            <Slider.Tag>
                                Amplitude
                            </Slider.Tag>
                            <Slider.Header>
                                <Button x:Name="AmplitudeButton" Content="{x:Bind AmplitudeSlider.Value, Mode=OneWay}"            
                                    Padding="4,0" MinWidth="70" Height="28"
                                    BorderThickness="1" BorderBrush= "{ThemeResource AppStroke}" Background= "{ThemeResource SystemAltLowColor}" >
                                    <Button.Flyout>
                                        <Flyout>

                                        </Flyout>
                                    </Button.Flyout>
                                </Button>
                            </Slider.Header>
                        </Slider>
                    </StackPanel>

                </local:OptionCase>
            </local:OptionSwitchPresenter>
        </StackPanel>

        <Border IsHitTestVisible="False" CornerRadius="6" Padding="12,3" MinHeight="40" Background="Red" RequestedTheme="Dark" HorizontalAlignment="Center" VerticalAlignment="Center"
                Visibility="{x:Bind BooleanToVisibilityConverter(GradientMappingSelector.IsHitTestVisible), Mode=OneWay}">
            <StackPanel Orientation="Horizontal">
                <SymbolIcon Symbol="Delete"/>
                <ContentControl Width="12"/>
                <TextBlock x:Name="GradientMappingTipTextBlock" FontWeight="Medium" VerticalAlignment="Center">
                    Drop to Remove
                </TextBlock>
            </StackPanel>
        </Border>


        <!--Dialog-->
        <ContentDialog x:Name="SettingDislog" Style="{StaticResource AppContentDialogStyle}">

            <ContentDialog.PrimaryButtonText>
                OK
            </ContentDialog.PrimaryButtonText>
            <ContentDialog.SecondaryButtonText>
                Cancel
            </ContentDialog.SecondaryButtonText>


        </ContentDialog>


        <!--Tip-->
        <Border x:Name="TipBorder" Visibility="Collapsed" IsHitTestVisible="False" Padding="12,2" CornerRadius="4" MinWidth="60" Height="40" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{ThemeResource AppAcrylicOverlayBrush}">
            <StackPanel>
                <TextBlock x:Name="TipTitleTextBlock" FontSize="16" HorizontalAlignment="Center" Foreground="{ThemeResource AppBarItemForegroundThemeBrush}" >
                    <!--Title-->
                </TextBlock>
                <TextBlock x:Name="TipSubtitleTextBlock" FontSize="12" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center" Foreground="{ThemeResource AppForeground}" >
                    <!--Subtitle-->
                </TextBlock>
            </StackPanel>
        </Border>

        <elements:Eyedropper x:Name="Eyedropper" Visibility="Collapsed"/>
        <elements:ClickEyedropper x:Name="ClickEyedropper" Visibility="Collapsed"/>


    </Grid>
</Page>