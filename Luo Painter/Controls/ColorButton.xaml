<Button
    x:Class="Luo_Painter.Controls.ColorButton"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="50"
    d:DesignWidth="50"
    Style="{StaticResource AppButtonStyle}"
    >

    <UIElement.KeyboardAccelerators>
        <KeyboardAccelerator Modifiers="None" Key="E"/>
    </UIElement.KeyboardAccelerators>

    <UIElement.ManipulationMode>
        TranslateX, TranslateY
    </UIElement.ManipulationMode>

    <UIElement.ContextFlyout>
        <Flyout x:Name="ColorFlyout" Placement="Left">
            <Grid Width="320" Height="420">
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="12"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="40"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="40"/>
                    </Grid.ColumnDefinitions>
                    <Button x:Name="StrawButton" Width="Auto" Height="Auto" Style="{StaticResource TextBlockButtonStyle}">
                        <UIElement.ManipulationMode>
                            TranslateX, TranslateY
                        </UIElement.ManipulationMode>
                        <FontIcon Glyph="&#xEF3C;" FontFamily="Segoe MDL2 Assets" />
                    </Button>
                    <ListBox x:Name="ColorListBox" Grid.Column="1" SelectedIndex="0">
                        <x:String>Hue</x:String>
                        <x:String>Value</x:String>
                        <x:String>Saturation</x:String>
                    </ListBox>
                    <ToggleButton x:Name="ColorShapeButton" Grid.Column="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Style="{StaticResource TextBlockButtonStyle}">
                        <SymbolIcon Symbol="{x:Bind ColorSpectrumShapeSymbolConverter(ColorShapeButton.IsChecked), Mode=OneWay}"/>
                    </ToggleButton>
                </Grid>
                <ColorPicker x:Name="ColorPicker" 
                             Grid.Row="2"
                             Color="Black" 
                             IsMoreButtonVisible="False" 
                             IsHexInputVisible="False" 
                             IsColorSpectrumVisible="True"
                             IsColorSliderVisible="True"
                             IsColorPreviewVisible="False"
                             IsColorChannelTextInputVisible="False" 
                             IsAlphaTextInputVisible="False" 
                             IsAlphaSliderVisible="False" 
                             IsAlphaEnabled="False" 
                             ColorSpectrumShape="{x:Bind ColorSpectrumShapeConverter(ColorShapeButton.IsChecked),Mode=OneWay}"
                             ColorSpectrumComponents="{x:Bind ColorSpectrumComponentsConverter(ColorListBox.SelectedIndex),Mode=OneWay}"
                             />
            </Grid>
        </Flyout>
    </UIElement.ContextFlyout>

    <Grid>
        <FontIcon Glyph="&#xE91F;" FontSize="32" FontFamily="Segoe MDL2 Assets" />
        <Ellipse Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center">
            <Shape.Fill>
                <SolidColorBrush Color="White" />
            </Shape.Fill>
        </Ellipse>
        <Ellipse Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center">
            <Shape.Fill>
                <SolidColorBrush Color="{x:Bind ColorPicker.Color, Mode=OneWay}" />
            </Shape.Fill>
        </Ellipse>
    </Grid>

</Button>